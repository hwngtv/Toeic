2025-05-07 12:36:08 [restartedMain] INFO  com.hungtv.toeic.be.BeApplication - Starting BeApplication using Java 21.0.7 with PID 18974 (/home/hwngtv/datn/be/target/classes started by hwngtv in /home/hwngtv/datn)
2025-05-07 12:36:08 [restartedMain] DEBUG com.hungtv.toeic.be.BeApplication - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-05-07 12:36:08 [restartedMain] INFO  com.hungtv.toeic.be.BeApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-07 12:36:08 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-05-07 12:36:08 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-05-07 12:36:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-07 12:36:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 61 ms. Found 7 JPA repository interfaces.
2025-05-07 12:36:10 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-07 12:36:10 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-07 12:36:10 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-07 12:36:10 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-07 12:36:10 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1593 ms
2025-05-07 12:36:10 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-07 12:36:10 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-07 12:36:10 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-05-07 12:36:10 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-07 12:36:10 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-07 12:36:10 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6c00ebb
2025-05-07 12:36:10 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-07 12:36:11 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-07 12:36:11 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.41
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-07 12:36:11 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-07 12:36:11 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table roles 
       modify column name enum ('ROLE_ADMIN','ROLE_MODERATOR','ROLE_USER')
2025-05-07 12:36:11 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-07 12:36:12 [restartedMain] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - Filter 'authenticationJwtTokenFilter' configured for use
2025-05-07 12:36:12 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-05-07 12:36:12 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-05-07 12:36:12 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-07 12:36:13 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-07 12:36:13 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 52 mappings in 'requestMappingHandlerMapping'
2025-05-07 12:36:13 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-05-07 12:36:13 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, AuthTokenFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-05-07 12:36:13 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-05-07 12:36:13 [restartedMain] WARN  o.s.b.a.t.ThymeleafAutoConfiguration$DefaultTemplateResolverConfiguration - Cannot find template location: classpath:/templates/ (please add some templates, check your Thymeleaf configuration, or set spring.thymeleaf.check-template-location=false)
2025-05-07 12:36:13 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-05-07 12:36:13 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-05-07 12:36:13 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-07 12:36:13 [restartedMain] INFO  com.hungtv.toeic.be.BeApplication - Started BeApplication in 5.373 seconds (process running for 5.669)
2025-05-07 12:36:13 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        roles r1_0
2025-05-07 12:36:13 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-05-07 12:36:13 [restartedMain] INFO  c.h.toeic.be.config.DatabaseSeeder - Bắt đầu khởi tạo dữ liệu ban đầu...
2025-05-07 12:36:13 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        roles r1_0
2025-05-07 12:36:13 [restartedMain] INFO  c.h.toeic.be.config.DatabaseSeeder - Các vai trò đã tồn tại, bỏ qua bước khởi tạo.
2025-05-07 12:36:13 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        u1_0.id 
    from
        users u1_0 
    where
        u1_0.username=? 
    limit
        ?
2025-05-07 12:36:13 [restartedMain] INFO  c.h.toeic.be.config.DatabaseSeeder - Tài khoản admin đã tồn tại, bỏ qua bước khởi tạo.
2025-05-07 12:36:13 [restartedMain] INFO  c.h.toeic.be.config.DatabaseSeeder - Hoàn tất khởi tạo dữ liệu ban đầu!
2025-05-07 12:36:27 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-07 12:36:27 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-07 12:36:27 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-05-07 12:36:27 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-05-07 12:36:27 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-05-07 12:36:27 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@6dca41b3
2025-05-07 12:36:27 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@374e5955
2025-05-07 12:36:27 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-05-07 12:36:27 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-05-07 12:36:27 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/me?_=1746596187779
2025-05-07 12:36:27 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/me?_=1746596187771
2025-05-07 12:36:27 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me?_=1746596187771
2025-05-07 12:36:27 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me?_=1746596187779
2025-05-07 12:36:27 [http-nio-8080-exec-3] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - JWT từ cookie: Không
2025-05-07 12:36:27 [http-nio-8080-exec-4] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - JWT từ cookie: Không
2025-05-07 12:36:27 [http-nio-8080-exec-3] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - Không có JWT hoặc JWT không hợp lệ
2025-05-07 12:36:27 [http-nio-8080-exec-4] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - Không có JWT hoặc JWT không hợp lệ
2025-05-07 12:36:27 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-05-07 12:36:27 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-05-07 12:36:27 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me?_=1746596187779
2025-05-07 12:36:27 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me?_=1746596187771
2025-05-07 12:36:27 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me?_=1746596187771", parameters={masked}
2025-05-07 12:36:27 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me?_=1746596187779", parameters={masked}
2025-05-07 12:36:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.hungtv.toeic.be.controllers.AuthController#getCurrentUser()
2025-05-07 12:36:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.hungtv.toeic.be.controllers.AuthController#getCurrentUser()
2025-05-07 12:36:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-05-07 12:36:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-05-07 12:36:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [UserStatusResponse{username='null', authenticated=false, role='null'}]
2025-05-07 12:36:27 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [UserStatusResponse{username='null', authenticated=false, role='null'}]
2025-05-07 12:36:27 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-05-07 12:36:27 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-05-07 12:36:33 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-05-07 12:36:33 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-05-07 12:36:33 [http-nio-8080-exec-6] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - JWT từ cookie: Không
2025-05-07 12:36:33 [http-nio-8080-exec-6] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - Không có JWT hoặc JWT không hợp lệ
2025-05-07 12:36:33 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-05-07 12:36:33 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-05-07 12:36:33 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2025-05-07 12:36:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.hungtv.toeic.be.controllers.AuthController#login(LoginRequest)
2025-05-07 12:36:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LoginRequest{username='admin', password='[PROTECTED]'}]
2025-05-07 12:36:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.password,
        u1_0.token_expiry_date,
        u1_0.updated_at,
        u1_0.username,
        u1_0.verification_token 
    from
        users u1_0 
    where
        u1_0.username=?
2025-05-07 12:36:33 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-05-07 12:36:33 [http-nio-8080-exec-6] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-05-07 12:36:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-05-07 12:36:33 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [JwtResponse{id=1, username='admin', email='admin@toeiclearning.com', fullName='Admin', roles=[ROLE_U (truncated)...]
2025-05-07 12:36:33 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-05-07 12:36:36 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/tests?page=0&size=10&sort=id,asc
2025-05-07 12:36:36 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/tests?page=0&size=10&sort=id,asc
2025-05-07 12:36:36 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/tests?page=0&size=10&sort=id,asc
2025-05-07 12:36:36 [http-nio-8080-exec-9] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - JWT từ cookie: Có
2025-05-07 12:36:36 [http-nio-8080-exec-9] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - Username từ JWT: admin
2025-05-07 12:36:36 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.password,
        u1_0.token_expiry_date,
        u1_0.updated_at,
        u1_0.username,
        u1_0.verification_token 
    from
        users u1_0 
    where
        u1_0.username=?
2025-05-07 12:36:36 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-05-07 12:36:36 [http-nio-8080-exec-9] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - Đã tải thông tin người dùng: admin
2025-05-07 12:36:36 [http-nio-8080-exec-9] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - Đã thiết lập xác thực cho: admin
2025-05-07 12:36:36 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/tests?page=0&size=10&sort=id,asc
2025-05-07 12:36:36 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/tests?page=0&size=10&sort=id,asc", parameters={masked}
2025-05-07 12:36:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.hungtv.toeic.be.controllers.TestController#getAllTests(int, int, String, String)
2025-05-07 12:36:36 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.hungtv.toeic.be.controllers.TestController.getAllTests(int,int,java.lang.String,java.lang.String); target is of class [com.hungtv.toeic.be.controllers.TestController]
2025-05-07 12:36:36 [http-nio-8080-exec-9] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.hungtv.toeic.be.controllers.TestController.getAllTests(int,int,java.lang.String,java.lang.String); target is of class [com.hungtv.toeic.be.controllers.TestController]
2025-05-07 12:36:36 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.created_at,
        t1_0.created_by,
        t1_0.description,
        t1_0.duration,
        t1_0.instructions,
        t1_0.is_active,
        t1_0.title,
        t1_0.type 
    from
        tests t1_0 
    order by
        t1_0.id 
    limit
        ?, ?
2025-05-07 12:36:36 [http-nio-8080-exec-9] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-05-07 12:36:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-05-07 12:36:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.hungtv.toeic.be.payload.response.TestResponse instances]
2025-05-07 12:36:36 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-05-07 12:36:36 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/tests?page=0&size=10&sort=id,asc
2025-05-07 12:36:36 [http-nio-8080-exec-10] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - JWT từ cookie: Có
2025-05-07 12:36:36 [http-nio-8080-exec-10] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - Username từ JWT: admin
2025-05-07 12:36:36 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.password,
        u1_0.token_expiry_date,
        u1_0.updated_at,
        u1_0.username,
        u1_0.verification_token 
    from
        users u1_0 
    where
        u1_0.username=?
2025-05-07 12:36:36 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-05-07 12:36:36 [http-nio-8080-exec-10] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - Đã tải thông tin người dùng: admin
2025-05-07 12:36:36 [http-nio-8080-exec-10] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - Đã thiết lập xác thực cho: admin
2025-05-07 12:36:36 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/tests?page=0&size=10&sort=id,asc
2025-05-07 12:36:36 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/tests?page=0&size=10&sort=id,asc", parameters={masked}
2025-05-07 12:36:36 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.hungtv.toeic.be.controllers.TestController#getAllTests(int, int, String, String)
2025-05-07 12:36:36 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.hungtv.toeic.be.controllers.TestController.getAllTests(int,int,java.lang.String,java.lang.String); target is of class [com.hungtv.toeic.be.controllers.TestController]
2025-05-07 12:36:36 [http-nio-8080-exec-10] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.hungtv.toeic.be.controllers.TestController.getAllTests(int,int,java.lang.String,java.lang.String); target is of class [com.hungtv.toeic.be.controllers.TestController]
2025-05-07 12:36:36 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.created_at,
        t1_0.created_by,
        t1_0.description,
        t1_0.duration,
        t1_0.instructions,
        t1_0.is_active,
        t1_0.title,
        t1_0.type 
    from
        tests t1_0 
    order by
        t1_0.id 
    limit
        ?, ?
2025-05-07 12:36:36 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-05-07 12:36:36 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 1 containing com.hungtv.toeic.be.payload.response.TestResponse instances]
2025-05-07 12:36:36 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-05-07 12:36:39 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/tests/5/active/false
2025-05-07 12:36:39 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/tests/5/active/false
2025-05-07 12:36:39 [http-nio-8080-exec-1] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - JWT từ cookie: Có
2025-05-07 12:36:39 [http-nio-8080-exec-1] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - Username từ JWT: admin
2025-05-07 12:36:39 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.password,
        u1_0.token_expiry_date,
        u1_0.updated_at,
        u1_0.username,
        u1_0.verification_token 
    from
        users u1_0 
    where
        u1_0.username=?
2025-05-07 12:36:39 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-05-07 12:36:39 [http-nio-8080-exec-1] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - Đã tải thông tin người dùng: admin
2025-05-07 12:36:39 [http-nio-8080-exec-1] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - Đã thiết lập xác thực cho: admin
2025-05-07 12:36:39 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/tests/5/active/false
2025-05-07 12:36:39 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/tests/5/active/false", parameters={}
2025-05-07 12:36:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.hungtv.toeic.be.controllers.TestController#setTestActiveStatus(Long, Boolean)
2025-05-07 12:36:39 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.hungtv.toeic.be.controllers.TestController.setTestActiveStatus(java.lang.Long,java.lang.Boolean); target is of class [com.hungtv.toeic.be.controllers.TestController]
2025-05-07 12:36:39 [http-nio-8080-exec-1] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.hungtv.toeic.be.controllers.TestController.setTestActiveStatus(java.lang.Long,java.lang.Boolean); target is of class [com.hungtv.toeic.be.controllers.TestController]
2025-05-07 12:36:39 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.created_at,
        t1_0.created_by,
        t1_0.description,
        t1_0.duration,
        t1_0.instructions,
        t1_0.is_active,
        t1_0.title,
        t1_0.type 
    from
        tests t1_0 
    where
        t1_0.id=?
2025-05-07 12:36:39 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    update
        tests 
    set
        created_at=?,
        created_by=?,
        description=?,
        duration=?,
        instructions=?,
        is_active=?,
        title=?,
        type=? 
    where
        id=?
2025-05-07 12:36:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-05-07 12:36:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.hungtv.toeic.be.payload.response.ApiResponse@5e0c09c2]
2025-05-07 12:36:39 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-05-07 12:36:39 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/tests/5/active/true
2025-05-07 12:36:39 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/tests/5/active/true
2025-05-07 12:36:39 [http-nio-8080-exec-4] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - JWT từ cookie: Có
2025-05-07 12:36:39 [http-nio-8080-exec-4] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - Username từ JWT: admin
2025-05-07 12:36:39 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.active,
        u1_0.created_at,
        u1_0.email,
        u1_0.full_name,
        u1_0.password,
        u1_0.token_expiry_date,
        u1_0.updated_at,
        u1_0.username,
        u1_0.verification_token 
    from
        users u1_0 
    where
        u1_0.username=?
2025-05-07 12:36:39 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        r1_0.user_id,
        r1_1.id,
        r1_1.name 
    from
        user_roles r1_0 
    join
        roles r1_1 
            on r1_1.id=r1_0.role_id 
    where
        r1_0.user_id=?
2025-05-07 12:36:39 [http-nio-8080-exec-4] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - Đã tải thông tin người dùng: admin
2025-05-07 12:36:39 [http-nio-8080-exec-4] DEBUG c.h.t.b.security.jwt.AuthTokenFilter - Đã thiết lập xác thực cho: admin
2025-05-07 12:36:39 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/tests/5/active/true
2025-05-07 12:36:39 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/tests/5/active/true", parameters={}
2025-05-07 12:36:39 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.hungtv.toeic.be.controllers.TestController#setTestActiveStatus(Long, Boolean)
2025-05-07 12:36:39 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.hungtv.toeic.be.controllers.TestController.setTestActiveStatus(java.lang.Long,java.lang.Boolean); target is of class [com.hungtv.toeic.be.controllers.TestController]
2025-05-07 12:36:39 [http-nio-8080-exec-4] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.hungtv.toeic.be.controllers.TestController.setTestActiveStatus(java.lang.Long,java.lang.Boolean); target is of class [com.hungtv.toeic.be.controllers.TestController]
2025-05-07 12:36:39 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        t1_0.id,
        t1_0.created_at,
        t1_0.created_by,
        t1_0.description,
        t1_0.duration,
        t1_0.instructions,
        t1_0.is_active,
        t1_0.title,
        t1_0.type 
    from
        tests t1_0 
    where
        t1_0.id=?
2025-05-07 12:36:39 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    update
        tests 
    set
        created_at=?,
        created_by=?,
        description=?,
        duration=?,
        instructions=?,
        is_active=?,
        title=?,
        type=? 
    where
        id=?
2025-05-07 12:36:39 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2025-05-07 12:36:39 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [com.hungtv.toeic.be.payload.response.ApiResponse@6f365b19]
2025-05-07 12:36:39 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-05-07 12:37:54 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-07 12:37:54 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-07 12:37:54 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-07 12:37:54 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-07 12:37:54 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
